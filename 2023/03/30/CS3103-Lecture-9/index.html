<!DOCTYPE html><html lang="zh-HK"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.8.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.8.0" type="image/png" sizes="32x32"><meta name="description" content="File Concept">
<meta property="og:type" content="article">
<meta property="og:title" content="CS3103-Lecture-9">
<meta property="og:url" content="https://lemonkai.github.io/2023/03/30/CS3103-Lecture-9/index.html">
<meta property="og:site_name" content="KAI Blog">
<meta property="og:description" content="File Concept">
<meta property="og:locale" content="zh_HK">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161548.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161900.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161944.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162131.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162440.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162657.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162713.png">
<meta property="article:published_time" content="2023-03-30T07:44:36.000Z">
<meta property="article:modified_time" content="2023-03-30T08:31:44.541Z">
<meta property="article:author" content="KAI">
<meta property="article:tag" content="CS3103">
<meta property="article:tag" content="Operating System">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161548.png"><title>CS3103-Lecture-9 | KAI Blog</title><link ref="canonical" href="https://lemonkai.github.io/2023/03/30/CS3103-Lecture-9/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.0"><link rel="stylesheet" href="css/custom.css"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":false,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"複製","copySuccess":"複製成功","copyError":"複製失敗"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner header-inner--height header-inner--bgcolor"><nav class="header-nav header-nav--sticky"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首頁</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">歸檔</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分類</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">標籤</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">CS3103-Lecture-9</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">發表於</span><span class="post-meta-item__value">2023-03-30</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新於</span><span class="post-meta-item__value">2023-03-30</span></span></div></header><div class="post-body">
        <h1 id="File-Concept"   >
          <a href="#File-Concept" class="heading-link"><i class="fas fa-link"></i></a><a href="#File-Concept" class="headerlink" title="File Concept"></a>File Concept</h1>
      <span id="more"></span>
<ul>
<li><p>File is a contiguous logical address space for storing information</p>
<ul>
<li>database, audio, video, web pages…</li>
</ul>
</li>
<li><p>There are different types of file</p>
<ul>
<li><p>data: numeric, character, binary, multimedia</p>
</li>
<li><p>program</p>
</li>
<li><p>device</p>
</li>
<li><p>proc file system</p>
<ul>
<li>file-system interface to retrieve system information</li>
</ul>
</li>
<li><p>…</p>
</li>
</ul>
</li>
</ul>

        <h1 id="File-Attributes"   >
          <a href="#File-Attributes" class="heading-link"><i class="fas fa-link"></i></a><a href="#File-Attributes" class="headerlink" title="File Attributes"></a>File Attributes</h1>
      <ul>
<li>Name - the only information kept in human-readable form</li>
<li>Identifier - uniuqe tag (number) identifies file within file system</li>
<li>Type - needed for systems that support different types</li>
<li>Location - pointer to file location on device</li>
<li>Size - current file size</li>
<li>Protection - controls who can do reading, writing, executing</li>
<li>Time, date, and user identification - data for protection, securtiy, and usage monitoring</li>
<li>Many variations, including extended file attributes such as file checksum</li>
</ul>

        <h1 id="File-Operations"   >
          <a href="#File-Operations" class="heading-link"><i class="fas fa-link"></i></a><a href="#File-Operations" class="headerlink" title="File Operations"></a>File Operations</h1>
      <ul>
<li>OS provides file operations to <ul>
<li>create:<ul>
<li>space in the file system should be found</li>
<li>an entry must be allocated in the directory</li>
</ul>
</li>
<li>open:<ul>
<li>return a handler for other perations</li>
<li>most operations need the file to be opened first</li>
</ul>
</li>
<li>read&#x2F;write:<ul>
<li>need to maintain a pointer</li>
</ul>
</li>
<li>repostion within file -seek</li>
<li>delete<ul>
<li>release file space</li>
</ul>
</li>
<li>truncate:<ul>
<li>shortening the length of a file. When truncated, its contents are preserved up to a certain point, after which any data that falls beyond that point is deleted or lost</li>
</ul>
</li>
<li>other operations can be implemented using these ones<ul>
<li>copy: create and read&#x2F;write</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="Open-Files"   >
          <a href="#Open-Files" class="heading-link"><i class="fas fa-link"></i></a><a href="#Open-Files" class="headerlink" title="Open Files"></a>Open Files</h2>
      <ul>
<li>Data needed to manage open files:<ul>
<li><p>File handle: a data structure that represents an open file. It countains information such as the file’s name, its current position in the file, and any file-related flags or attributes (such as read-only or write-through mode)</p>
</li>
<li><p>File descriptor: a small integer that identifier an open file within a process. It is used by the operating system to manage the file’s access permissions and to track its usage by various processes.</p>
</li>
<li><p>File table: a data structure that maintains a list of all open files in the system, along with their associated file handles and file descriptors.</p>
</li>
<li><p>File cache: A file cache is a portion of memory that the operating system uses to store recently accessed portions of open files.</p>
</li>
<li><p>Lock table: keeps track of which processes have locked which files and ensures that conflicting lock requests are resolved appropriately.</p>
</li>
<li><p>I&#x2F;O buffer: a portion of memory that is used to temporarily store file data as it is read or written. The OS typically uses a pool of I&#x2F;O buffers to improve file access performance and to minimize disk accesses.</p>
</li>
</ul>
</li>
</ul>

        <h2 id="File-Types-Name-Extension"   >
          <a href="#File-Types-Name-Extension" class="heading-link"><i class="fas fa-link"></i></a><a href="#File-Types-Name-Extension" class="headerlink" title="File Types - Name, Extension"></a>File Types - Name, Extension</h2>
      <p><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161548.png"></p>

        <h1 id="Access-Methods"   >
          <a href="#Access-Methods" class="heading-link"><i class="fas fa-link"></i></a><a href="#Access-Methods" class="headerlink" title="Access Methods"></a>Access Methods</h1>
      <ul>
<li>Sequential access<ul>
<li>a group of elements is access in a predetermined order</li>
<li>for some media types, the only access mode (e.g., tape)</li>
</ul>
</li>
<li>Direct access<ul>
<li>access an element at an arbitrary position in a sequence in (roughly) equal time,<br>independent of sequence size<ul>
<li>it is possible to emulate random access in a tape, but access time varies</li>
</ul>
</li>
<li>sometime called random access<br><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161900.png"></li>
</ul>
</li>
</ul>

        <h1 id="Directory-Structure"   >
          <a href="#Directory-Structure" class="heading-link"><i class="fas fa-link"></i></a><a href="#Directory-Structure" class="headerlink" title="Directory Structure"></a>Directory Structure</h1>
      <ul>
<li>Directory: a collection of nodes containing information about files<br><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330161944.png"></li>
</ul>

        <h2 id="A-Typical-File-system-Organization"   >
          <a href="#A-Typical-File-system-Organization" class="heading-link"><i class="fas fa-link"></i></a><a href="#A-Typical-File-system-Organization" class="headerlink" title="A Typical File-system Organization"></a>A Typical File-system Organization</h2>
      <ul>
<li>Operations performed on directory<ul>
<li>Search for a file</li>
<li>Create a file</li>
<li>Delete a file</li>
<li>List a directory</li>
<li>Rename a file</li>
<li>Traverse the file system</li>
<li>…<br><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162131.png"></li>
</ul>
</li>
</ul>

        <h2 id="Directory-Organization"   >
          <a href="#Directory-Organization" class="heading-link"><i class="fas fa-link"></i></a><a href="#Directory-Organization" class="headerlink" title="Directory Organization"></a>Directory Organization</h2>
      <ul>
<li>Organize the directory (logically) to obtain<ul>
<li>Efficiency – locating a file quickly</li>
<li>Naming – convenient to users<ul>
<li>Two users can have the same name for different files</li>
<li>The same file can have several different names</li>
</ul>
</li>
<li>Grouping – logical grouping of files by properties, (e.g., all Java programs, all games, …)</li>
</ul>
</li>
</ul>

        <h2 id="Single-Level-Directory"   >
          <a href="#Single-Level-Directory" class="heading-link"><i class="fas fa-link"></i></a><a href="#Single-Level-Directory" class="headerlink" title="Single-Level Directory"></a>Single-Level Directory</h2>
      <ul>
<li>A single directory for all users<ul>
<li>naming problems and grouping problems<ul>
<li>Two users want to have same file names</li>
<li>Hard to group files<br><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162440.png"></li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="Two-Level-Directory"   >
          <a href="#Two-Level-Directory" class="heading-link"><i class="fas fa-link"></i></a><a href="#Two-Level-Directory" class="headerlink" title="Two-Level Directory"></a>Two-Level Directory</h2>
      <ul>
<li>Separate directory for each user<ul>
<li>different users can have the same name for different files<ul>
<li>Each user has his own user file directory (UFD), it is in the master file directory (MFD)</li>
</ul>
</li>
<li>efficient to search</li>
<li>cannot group files</li>
<li>How to share files between different users, and how to share the system files?<br><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162657.png"></li>
</ul>
</li>
</ul>

        <h2 id="Tree-Structured-Directories"   >
          <a href="#Tree-Structured-Directories" class="heading-link"><i class="fas fa-link"></i></a><a href="#Tree-Structured-Directories" class="headerlink" title="Tree-Structured Directories"></a>Tree-Structured Directories</h2>
      <ul>
<li><p>Files organizaed into trees</p>
<ul>
<li>efficient in searching, can group files, convenient naming<br><img src="https://raw.githubusercontent.com/LemonKAI/image/main/20230330162713.png"></li>
</ul>
</li>
<li><p>File can be accessed using absolute or relative path name</p>
<ul>
<li>absolute path name: &#x2F;home&#x2F;alice&#x2F;..</li>
<li>relative path is relative to the current directory (pwd)<ul>
<li>creating a new file, delete a file, or create a sub-directory<ul>
<li>e.g., if current directory is &#x2F;mail, a mkdir count will create &#x2F;mail&#x2F;count</li>
</ul>
</li>
</ul>
</li>
<li>How to share a file&#x2F;directory?<ul>
<li>It’s not allowed</li>
</ul>
</li>
</ul>
</li>
<li><p>Delete directory</p>
<ul>
<li>If directory is empty, then it’s easy to handle</li>
<li>If not<ul>
<li>Option I: directory cannot be deleted, unless it’s empty</li>
<li>Option II: delete all the files, directories and sub-directories</li>
<li>rm -rf &#x2F;</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="Acyclic-Graph-Directories"   >
          <a href="#Acyclic-Graph-Directories" class="heading-link"><i class="fas fa-link"></i></a><a href="#Acyclic-Graph-Directories" class="headerlink" title="Acyclic-Graph Directories"></a>Acyclic-Graph Directories</h2>
      <ul>
<li>Organize directories into acyclic-graphs<ul>
<li>Allow links to a directory entry&#x2F;files for<br>aliasing (no longer a tree)</li>
</ul>
</li>
<li>Dangling pointer problem<ul>
<li>e.g., if delete file &#x2F;dict&#x2F;all, then &#x2F;dict&#x2F;w&#x2F;list and &#x2F;spell&#x2F;words&#x2F;list are dangling pointers</li>
<li>Solution: backpointers&#x2F;reference counter</li>
</ul>
</li>
<li>backpointers record all the pointers to the entity, a variable size record</li>
<li>Or count <code>#</code> of links to it and only (physically) delete it when counter is zero</li>
</ul>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文結束，感謝您的閱讀 ------</div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://lemonkai.github.io/tags/CS3103/">CS3103</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://lemonkai.github.io/tags/Operating-System/">Operating System</a></span></div><nav class="post-paginator paginator"><div class="paginator-next"><a class="paginator-next__link" href="/2023/03/23/CS3103-Lecture-8/"><span class="paginator-prev__text">CS1303-Lecture-8</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="utterances-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目錄</span><span class="sidebar-nav-ov">本站概覽</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#File-Concept"><span class="toc-number">1.</span> <span class="toc-text">
          File Concept</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#File-Attributes"><span class="toc-number">2.</span> <span class="toc-text">
          File Attributes</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#File-Operations"><span class="toc-number">3.</span> <span class="toc-text">
          File Operations</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Open-Files"><span class="toc-number">3.1.</span> <span class="toc-text">
          Open Files</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#File-Types-Name-Extension"><span class="toc-number">3.2.</span> <span class="toc-text">
          File Types - Name, Extension</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Access-Methods"><span class="toc-number">4.</span> <span class="toc-text">
          Access Methods</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Directory-Structure"><span class="toc-number">5.</span> <span class="toc-text">
          Directory Structure</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#A-Typical-File-system-Organization"><span class="toc-number">5.1.</span> <span class="toc-text">
          A Typical File-system Organization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Directory-Organization"><span class="toc-number">5.2.</span> <span class="toc-text">
          Directory Organization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Single-Level-Directory"><span class="toc-number">5.3.</span> <span class="toc-text">
          Single-Level Directory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Two-Level-Directory"><span class="toc-number">5.4.</span> <span class="toc-text">
          Two-Level Directory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tree-Structured-Directories"><span class="toc-number">5.5.</span> <span class="toc-text">
          Tree-Structured Directories</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Acyclic-Graph-Directories"><span class="toc-number">5.6.</span> <span class="toc-text">
          Acyclic-Graph Directories</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">Seize the Day</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">16</div><div class="sidebar-ov-state-item__name">歸檔</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">7</div><div class="sidebar-ov-state-item__name">分類</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">8</div><div class="sidebar-ov-state-item__name">標籤</div></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已閱讀了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>KAI</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script>function loadUtterances() {
  var d = document, s = d.createElement('script');
  var container = d.getElementById('utterances-container');

  if (!container) {
    return;
  }
  s.src = 'https://utteranc.es/client.js';
  s.setAttribute('repo', 'LemonKAI/KAIBlogComment');
  s.setAttribute('issue-term', 'title');
  s.setAttribute('label', 'utterances');
  s.setAttribute('theme', 'github-light');
  s.setAttribute('crossorigin', 'anonymous');
  s.setAttribute('async', '');
  if (false) {
    s.setAttribute('data-pjax-rm', '');
  }
  container.append(s);
}

if (false) {
  loadUtterances();
} else {
  window.addEventListener('DOMContentLoaded', loadUtterances, false);
}</script><script src="/js/utils.js?v=2.8.0"></script><script src="/js/stun-boot.js?v=2.8.0"></script><script src="/js/scroll.js?v=2.8.0"></script><script src="/js/header.js?v=2.8.0"></script><script src="/js/sidebar.js?v=2.8.0"></script></body></html>